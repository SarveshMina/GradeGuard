import{_ as p,c as r,a as e,i as g,j as y,o as a,t as d,p as k,d as c,g as x,n as h,f as F,v as L,F as j,b as f,w as D,r as w,h as _,m as G,k as V,A as N,l as U,e as E}from"./index-C4I2UW3l.js";import{g as b}from"./gradeRadarService-CKlUWBtf.js";const H={name:"GradeRadarChart",props:{moduleData:{type:Object,required:!0}},computed:{hasData(){const s=this.moduleData.statistics||{};return s.teaching_quality_avg>0||s.difficulty_avg>0},chartData(){const s=this.moduleData.statistics||{};return[{axis:"Teaching",value:s.teaching_quality_avg||0},{axis:"Organization",value:s.organization_avg||0},{axis:"Content",value:s.content_quality_avg||0},{axis:"Engagement",value:s.engagement_avg||0},{axis:"Value",value:s.value_avg||0},{axis:"Difficulty",value:5-(s.difficulty_avg||0)}]},radarCircles(){return[1,2,3,4,5].map(t=>({radius:120*(t/5)}))},radarAxes(){return Array.from({length:6},(l,v)=>{const i=Math.PI*2*v/6-Math.PI/2;return{x:150+120*Math.cos(i),y:150+120*Math.sin(i)}})},axisLabels(){return this.chartData.map((l,v)=>{const i=Math.PI*2*v/6-Math.PI/2;return{text:l.axis,x:150+140*Math.cos(i),y:150+140*Math.sin(i)}})},dataPointsArray(){return this.chartData.map((l,v)=>{const i=Math.PI*2*v/6-Math.PI/2,n=Math.max(0,Math.min(5,l.value))/5*120;return{x:150+n*Math.cos(i),y:150+n*Math.sin(i)}})},dataPoints(){return this.dataPointsArray.map(s=>`${s.x},${s.y}`).join(" ")}}},z={class:"radar-chart-container"},W={key:0,class:"no-data-message"},Y={key:1,ref:"chartContainer",class:"chart-area"},O={width:"100%",height:"100%",viewBox:"0 0 300 300",xmlns:"http://www.w3.org/2000/svg"},Q={class:"radar-grid"},$=["r"],J=["x2","y2"],K=["x","y"],X=["points"],Z=["cx","cy"];function ee(s,t,l,v,i,o){return a(),r("div",z,[t[1]||(t[1]=e("h3",{class:"chart-title"},"Module Rating Analysis",-1)),o.hasData?(a(),r("div",Y,[(a(),r("svg",O,[e("g",Q,[(a(!0),r(g,null,y(o.radarCircles,(n,m)=>(a(),r("circle",{key:`circle-${m}`,cx:150,cy:150,r:n.radius,stroke:"#e0e0e0","stroke-width":"1",fill:"none",class:"radar-grid-circle"},null,8,$))),128)),(a(!0),r(g,null,y(o.radarAxes,(n,m)=>(a(),r("line",{key:`axis-${m}`,x1:150,y1:150,x2:n.x,y2:n.y,stroke:"#e0e0e0","stroke-width":"1",class:"radar-grid-line"},null,8,J))),128)),(a(!0),r(g,null,y(o.axisLabels,(n,m)=>(a(),r("text",{key:`label-${m}`,x:n.x,y:n.y,"text-anchor":"middle","dominant-baseline":"middle","font-size":"12",class:"radar-axis-label"},d(n.text),9,K))),128))]),e("polygon",{points:o.dataPoints,class:"radar-data-polygon"},null,8,X),(a(!0),r(g,null,y(o.dataPointsArray,(n,m)=>(a(),r("circle",{key:`point-${m}`,cx:n.x,cy:n.y,r:"4",class:"radar-data-point"},null,8,Z))),128))]))],512)):(a(),r("div",W,t[0]||(t[0]=[e("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1","stroke-linecap":"round","stroke-linejoin":"round"},[e("circle",{cx:"12",cy:"12",r:"10"}),e("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),e("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})],-1),e("p",null,"No rating data available for this module yet.",-1)])))])}const te=p(H,[["render",ee],["__scopeId","data-v-cf8c953d"]]),se={name:"GradeDistribution",props:{gradeData:{type:Array,default:()=>[]}},computed:{hasData(){return this.gradeData&&this.gradeData.length>0&&this.gradeData.some(s=>s.count>0)},formattedGradeData(){const s=["A+","A","A-","B+","B","B-","C+","C","C-","D","F"];if(!this.hasData)return s.map(l=>({grade:l,count:0}));const t={};return this.gradeData.forEach(l=>{t[l.grade]=l.count||0}),s.map(l=>({grade:l,count:t[l]||0}))},maxCount(){return this.hasData?Math.max(...this.formattedGradeData.map(s=>s.count),1):10}},methods:{calculateBarHeight(s){return this.maxCount===0?0:s/this.maxCount*90}}},ie={class:"grade-distribution-container"},ae={key:0,class:"no-data-message"},re={key:1,class:"chart-area"},oe={class:"bar-chart"},ne={class:"bar-label"},le={class:"bar-wrapper"},de={key:0,class:"bar-value"};function ue(s,t,l,v,i,o){return a(),r("div",ie,[t[2]||(t[2]=e("h3",{class:"chart-title"},"Grade Distribution",-1)),o.hasData?(a(),r("div",re,[e("div",oe,[(a(!0),r(g,null,y(o.formattedGradeData,(n,m)=>(a(),r("div",{key:m,class:"bar-container"},[e("div",ne,d(n.grade),1),e("div",le,[e("div",{class:"bar",style:k({height:`${o.calculateBarHeight(n.count)}%`})},[n.count>0?(a(),r("div",de,d(n.count),1)):c("",!0)],4)])]))),128))]),t[1]||(t[1]=e("div",{class:"chart-legend"},[e("div",{class:"legend-item"},[e("div",{class:"legend-color"}),e("div",{class:"legend-label"},"Number of students achieving each grade")])],-1))])):(a(),r("div",ae,t[0]||(t[0]=[e("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83"}),e("path",{d:"M22 12A10 10 0 0 0 12 2v10z"})],-1),e("p",null,"No grade distribution data available for this module yet.",-1)])))])}const ce=p(se,[["render",ue],["__scopeId","data-v-dce32327"]]),me={name:"ReviewItem",props:{review:{type:Object,required:!0},isAuthor:{type:Boolean,default:!1}},methods:{getUserInitial(){return this.review.user_name?this.review.user_name.charAt(0).toUpperCase():"A"},formatDate(s){if(!s)return"Unknown date";try{const t={year:"numeric",month:"short",day:"numeric"};return new Date(s).toLocaleDateString(void 0,t)}catch{return s}},calculateStarWidth(s){return s?`${s/5*100}%`:"0%"},toggleHelpful(){this.$emit("toggle-helpful",{reviewId:this.review.id,currentStatus:this.review.marked_helpful})}}},ve={class:"review-item"},he={class:"review-header"},ge={class:"review-user-info"},fe={class:"user-avatar"},ye={class:"user-details"},we={class:"username"},_e={class:"review-date"},xe={key:0,class:"review-actions"},ke={class:"review-ratings"},pe={class:"rating-item"},De={class:"rating-value"},be={class:"rating-stars"},Ce={class:"rating-item"},Re={class:"rating-value"},Me={class:"rating-stars"},Ae={class:"rating-item"},Ie={class:"rating-value"},Se={key:0,class:"review-comment"},Fe={class:"review-footer"},Be={class:"helpful-section"};function Te(s,t,l,v,i,o){return a(),r("div",ve,[e("div",he,[e("div",ge,[e("div",fe,d(o.getUserInitial()),1),e("div",ye,[e("div",we,d(l.review.user_name||"Anonymous User"),1),e("div",_e,d(o.formatDate(l.review.created_at)),1)])]),l.isAuthor?(a(),r("div",xe,[e("button",{class:"delete-btn",onClick:t[0]||(t[0]=n=>s.$emit("delete-review",l.review.id))},t[2]||(t[2]=[x('<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-cff4e89a><polyline points="3 6 5 6 21 6" data-v-cff4e89a></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2" data-v-cff4e89a></path><line x1="10" y1="11" x2="10" y2="17" data-v-cff4e89a></line><line x1="14" y1="11" x2="14" y2="17" data-v-cff4e89a></line></svg><span data-v-cff4e89a>Delete</span>',2)]))])):c("",!0)]),e("div",ke,[e("div",pe,[t[4]||(t[4]=e("div",{class:"rating-label"},"Difficulty",-1)),e("div",De,[e("div",be,[t[3]||(t[3]=e("div",{class:"stars-background"},"★★★★★",-1)),e("div",{class:"stars-filled",style:k({width:o.calculateStarWidth(l.review.difficulty)})},"★★★★★",4)]),e("span",null,d(l.review.difficulty),1)])]),e("div",Ce,[t[6]||(t[6]=e("div",{class:"rating-label"},"Teaching Quality",-1)),e("div",Re,[e("div",Me,[t[5]||(t[5]=e("div",{class:"stars-background"},"★★★★★",-1)),e("div",{class:"stars-filled",style:k({width:o.calculateStarWidth(l.review.teaching_quality)})},"★★★★★",4)]),e("span",null,d(l.review.teaching_quality),1)])]),e("div",Ae,[t[7]||(t[7]=e("div",{class:"rating-label"},"Recommended",-1)),e("div",Ie,[e("div",{class:h(["recommended-indicator",{"recommended-yes":l.review.recommended,"recommended-no":!l.review.recommended}])},d(l.review.recommended?"Yes":"No"),3)])])]),l.review.comment&&l.review.comment.trim()?(a(),r("div",Se,[e("p",null,d(l.review.comment),1)])):c("",!0),e("div",Fe,[e("div",Be,[e("button",{class:h(["helpful-btn",{"marked-helpful":l.review.marked_helpful}]),onClick:t[1]||(t[1]=(...n)=>o.toggleHelpful&&o.toggleHelpful(...n))},[t[8]||(t[8]=e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"M14 9V5a3 3 0 0 0-3-3l-4 9v11h11.28a2 2 0 0 0 2-1.7l1.38-9a2 2 0 0 0-2-2.3H14z"}),e("path",{d:"M7 22H4a2 2 0 0 1-2-2v-7a2 2 0 0 1 2-2h3"})],-1)),e("span",null,"Helpful "+d(l.review.helpful_count?`(${l.review.helpful_count})`:""),1)],2)])])])}const qe=p(me,[["render",Te],["__scopeId","data-v-cff4e89a"]]),Pe={name:"ReviewForm",props:{moduleId:{type:String,required:!0}},data(){return{formData:{difficulty:0,teaching_quality:0,recommended:null,comment:""},submitting:!1,errors:{},maxCommentLength:1e3}},computed:{isFormValid(){return this.formData.difficulty>0&&this.formData.teaching_quality>0&&this.formData.recommended!==null},isApproachingLimit(){return this.formData.comment.length>this.maxCommentLength*.9}},methods:{setRating(s,t){this.formData[s]===t?this.formData[s]=0:this.formData[s]=t,this.errors[s]&&this.$delete(this.errors,s)},cancelForm(){this.$emit("form-canceled")},validateForm(){let s=!0;return this.errors={},this.formData.difficulty||(this.errors.difficulty="Please rate the module difficulty",s=!1),this.formData.teaching_quality||(this.errors.teaching_quality="Please rate the teaching quality",s=!1),this.formData.recommended===null&&(this.errors.recommended="Please indicate if you would recommend this module",s=!1),this.formData.comment.length>this.maxCommentLength&&(this.errors.comment=`Comment must not exceed ${this.maxCommentLength} characters`,s=!1),s},async submitReview(){if(!this.submitting&&this.validateForm()){this.submitting=!0;try{const s={module_id:this.moduleId,difficulty:this.formData.difficulty,teaching_quality:this.formData.teaching_quality,recommended:this.formData.recommended,comment:this.formData.comment.trim()},t=await b.submitReview(s);this.$emit("review-submitted",t.data),this.resetForm()}catch(s){console.error("Error submitting review:",s),s.response&&s.response.data&&s.response.data.errors?this.errors=s.response.data.errors:this.errors={general:"Failed to submit review. Please try again later."}}finally{this.submitting=!1}}},resetForm(){this.formData={difficulty:0,teaching_quality:0,recommended:null,comment:""},this.errors={}}}},Le={class:"review-form"},je={class:"rating-section"},Ge={class:"rating-group"},Ve={class:"star-rating"},Ne=["onClick"],Ue={class:"rating-value"},Ee={key:0,class:"error-message"},He={class:"rating-group"},ze={class:"star-rating"},We=["onClick"],Ye={class:"rating-value"},Oe={key:0,class:"error-message"},Qe={class:"rating-group"},$e={class:"toggle-buttons"},Je={key:0,class:"error-message"},Ke={class:"comment-section"},Xe=["maxlength"],Ze={key:0,class:"error-message"},et={class:"form-actions"},tt=["disabled"],st={key:0,class:"spinner"},it={key:1};function at(s,t,l,v,i,o){return a(),r("div",Le,[t[9]||(t[9]=e("h3",{class:"form-title"},"Add Your Review",-1)),e("div",je,[e("div",Ge,[t[5]||(t[5]=e("label",null,"Difficulty Level",-1)),e("div",Ve,[(a(),r(g,null,y(5,n=>e("button",{key:`difficulty-${n}`,type:"button",class:h(["star-btn",{active:i.formData.difficulty>=n}]),onClick:m=>o.setRating("difficulty",n)}," ★ ",10,Ne)),64)),e("span",Ue,d(i.formData.difficulty||"-"),1)]),i.errors.difficulty?(a(),r("div",Ee,d(i.errors.difficulty),1)):c("",!0)]),e("div",He,[t[6]||(t[6]=e("label",null,"Teaching Quality",-1)),e("div",ze,[(a(),r(g,null,y(5,n=>e("button",{key:`teaching-${n}`,type:"button",class:h(["star-btn",{active:i.formData.teaching_quality>=n}]),onClick:m=>o.setRating("teaching_quality",n)}," ★ ",10,We)),64)),e("span",Ye,d(i.formData.teaching_quality||"-"),1)]),i.errors.teaching_quality?(a(),r("div",Oe,d(i.errors.teaching_quality),1)):c("",!0)]),e("div",Qe,[t[7]||(t[7]=e("label",null,"Would you recommend this module?",-1)),e("div",$e,[e("button",{type:"button",class:h(["toggle-btn",{active:i.formData.recommended===!0}]),onClick:t[0]||(t[0]=n=>i.formData.recommended=!0)}," Yes ",2),e("button",{type:"button",class:h(["toggle-btn",{active:i.formData.recommended===!1}]),onClick:t[1]||(t[1]=n=>i.formData.recommended=!1)}," No ",2)]),i.errors.recommended?(a(),r("div",Je,d(i.errors.recommended),1)):c("",!0)])]),e("div",Ke,[t[8]||(t[8]=e("label",{for:"review-comment"},"Your comments (optional)",-1)),F(e("textarea",{id:"review-comment","onUpdate:modelValue":t[2]||(t[2]=n=>i.formData.comment=n),placeholder:"Share your experience with this module...",rows:"4",maxlength:i.maxCommentLength},null,8,Xe),[[L,i.formData.comment]]),e("div",{class:h(["char-count",{"limit-warning":o.isApproachingLimit}])},d(i.formData.comment.length)+"/"+d(i.maxCommentLength),3),i.errors.comment?(a(),r("div",Ze,d(i.errors.comment),1)):c("",!0)]),e("div",et,[e("button",{type:"button",class:"cancel-btn",onClick:t[3]||(t[3]=(...n)=>o.cancelForm&&o.cancelForm(...n))},"Cancel"),e("button",{type:"button",class:"submit-btn",disabled:!o.isFormValid||i.submitting,onClick:t[4]||(t[4]=(...n)=>o.submitReview&&o.submitReview(...n))},[i.submitting?(a(),r("div",st)):(a(),r("span",it,"Submit Review"))],8,tt)])])}const rt=p(Pe,[["render",at],["__scopeId","data-v-23400823"]]),ot={name:"ModuleDetail",components:{Footer:j,GradeRadarChart:te,GradeDistribution:ce,ReviewItem:qe,ReviewForm:rt},data(){return{darkMode:!1,isScrolled:!1,loading:!0,moduleId:null,moduleData:{id:"",name:"",code:"",university:"",degree:"",year:"",semester:"",credits:0,statistics:{difficulty_avg:0,teaching_quality_avg:0,recommended_avg:0,total_reviews:0},reviews:[],grade_distribution:[]},reviewSortBy:"recent",showReviewForm:!1,showDeleteModal:!1,reviewToDelete:null,showToast:!1,toastMessage:"",toastType:"success"}},computed:{isLoggedIn(){return localStorage.getItem("token")!==null},sortedReviews(){if(!this.moduleData.reviews)return[];const s=[...this.moduleData.reviews];switch(this.reviewSortBy){case"recent":return s.sort((t,l)=>new Date(l.created_at)-new Date(t.created_at));case"rating":return s.sort((t,l)=>l.teaching_quality-t.teaching_quality);case"useful":return s.sort((t,l)=>l.helpful_count-t.helpful_count);default:return s}}},methods:{toggleDarkMode(){this.darkMode=U(),this.updateGradient()},updateGradient(){const s=this.$refs.moduleDetailContainer;s&&(this.darkMode?(s.style.setProperty("--bg-gradient-from","#1a1a2e"),s.style.setProperty("--bg-gradient-to","#0f0f1a")):(s.style.setProperty("--bg-gradient-from","#f9f9ff"),s.style.setProperty("--bg-gradient-to","#f0f0ff")))},handleScroll(){this.isScrolled=window.scrollY>20},calculateStarWidth(s){return`${s/5*100}%`},formatRating(s){return s==null?"N/A":s.toFixed(1)},formatPercentage(s){return s==null?"N/A":`${s.toFixed(0)}%`},isReviewAuthor(s){return this.isLoggedIn?s.is_author===!0:!1},async loadModuleDetails(){this.loading=!0;try{if(this.moduleId=this.$route.params.id,!this.moduleId){this.displayToast("Module ID is required","error"),this.$router.push("/graderadar");return}const s=await b.getModuleDetails(this.moduleId);this.moduleData=s.data,this.moduleData.reviews||(this.moduleData.reviews=[]),this.moduleData.grade_distribution||(this.moduleData.grade_distribution=[])}catch(s){console.error("Error loading module details:",s),this.displayToast("Error loading module details. Please try again.","error")}finally{this.loading=!1}},onReviewSubmitted(s){this.showReviewForm=!1,this.moduleData.reviews.unshift(s),this.loadModuleDetails(),this.displayToast("Your review has been submitted successfully!","success")},confirmDeleteReview(s){this.reviewToDelete=s,this.showDeleteModal=!0},async deleteReview(){if(this.reviewToDelete)try{await b.deleteReview(this.reviewToDelete),this.moduleData.reviews=this.moduleData.reviews.filter(s=>s.id!==this.reviewToDelete),this.displayToast("Review deleted successfully","success")}catch(s){console.error("Error deleting review:",s),this.displayToast("Error deleting review. Please try again.","error")}finally{this.showDeleteModal=!1,this.reviewToDelete=null}},displayToast(s,t="success"){this.toastMessage=s,this.toastType=t,this.showToast=!0,setTimeout(()=>{this.showToast=!1},3e3)}},mounted(){this.darkMode=V(),window.addEventListener("darkModeChange",s=>{this.darkMode=s.detail.isDark,this.updateGradient()}),window.addEventListener("scroll",this.handleScroll),N.init({duration:800,offset:100,once:!0,easing:"ease-out-cubic"}),this.updateGradient(),this.loadModuleDetails()},beforeUnmount(){window.removeEventListener("darkModeChange",this.onDarkModeChange),window.removeEventListener("scroll",this.handleScroll)}},nt={class:"module-detail-container",ref:"moduleDetailContainer"},lt={class:"breadcrumbs"},dt={class:"breadcrumb-item active"},ut={class:"header-actions"},ct={key:0,class:"sun-icon",xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},mt={key:1,class:"moon-icon",xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},vt={class:"module-detail-main"},ht={key:0,class:"loading-container"},gt={class:"module-header-section","data-aos":"fade-up"},ft={class:"module-header-content"},yt={class:"module-title-area"},wt={class:"module-code"},_t={class:"module-meta"},xt={class:"meta-item"},kt={class:"meta-item"},pt={class:"module-stats-summary"},Dt={class:"stats-item"},bt={class:"stat-value"},Ct={class:"rating-stars"},Rt={class:"stats-item"},Mt={class:"stat-value"},At={class:"rating-stars"},It={class:"stats-item"},St={class:"stat-value"},Ft={class:"stats-item"},Bt={class:"stat-value"},Tt={class:"module-overview-section","data-aos":"fade-up"},qt={class:"overview-container"},Pt={class:"overview-column ratings-chart"},Lt={class:"overview-column grade-distribution"},jt={class:"module-reviews-section","data-aos":"fade-up"},Gt={class:"section-header reviews-header"},Vt={key:0,class:"review-form-container","data-aos":"fade-up"},Nt={class:"review-filters"},Ut={class:"filter-group"},Et={key:1,class:"reviews-list"},Ht={key:2,class:"no-reviews"},zt={key:0,class:"modal-overlay"},Wt={class:"modal-container"},Yt={class:"modal-header"},Ot={class:"modal-actions"},Qt={key:0,width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},$t={key:1,width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"};function Jt(s,t,l,v,i,o){var C,R,M,A,I,S;const n=w("router-link"),m=w("GradeRadarChart"),B=w("GradeDistribution"),T=w("ReviewForm"),q=w("ReviewItem"),P=w("Footer");return a(),r("div",nt,[e("header",{class:h(["module-detail-header",{scrolled:i.isScrolled}])},[e("div",lt,[f(n,{to:"/",class:"breadcrumb-item"},{default:D(()=>t[8]||(t[8]=[_("Home")])),_:1}),t[10]||(t[10]=e("span",{class:"breadcrumb-separator"},"/",-1)),f(n,{to:"/graderadar",class:"breadcrumb-item"},{default:D(()=>t[9]||(t[9]=[_("GradeRadar")])),_:1}),t[11]||(t[11]=e("span",{class:"breadcrumb-separator"},"/",-1)),f(n,{to:`/graderadar/university/${encodeURIComponent(i.moduleData.university)}`,class:"breadcrumb-item"},{default:D(()=>[_(d(i.moduleData.university),1)]),_:1},8,["to"]),t[12]||(t[12]=e("span",{class:"breadcrumb-separator"},"/",-1)),f(n,{to:`/graderadar/modules/${encodeURIComponent(i.moduleData.university)}/${encodeURIComponent(i.moduleData.degree)}`,class:"breadcrumb-item"},{default:D(()=>[_(d(i.moduleData.degree),1)]),_:1},8,["to"]),t[13]||(t[13]=e("span",{class:"breadcrumb-separator"},"/",-1)),e("span",dt,d(i.moduleData.name),1)]),e("div",ut,[e("button",{onClick:t[0]||(t[0]=(...u)=>o.toggleDarkMode&&o.toggleDarkMode(...u)),class:"theme-toggle","aria-label":"Toggle dark mode"},[i.darkMode?(a(),r("svg",ct,t[14]||(t[14]=[x('<circle cx="12" cy="12" r="5" data-v-da56443a></circle><line x1="12" y1="1" x2="12" y2="3" data-v-da56443a></line><line x1="12" y1="21" x2="12" y2="23" data-v-da56443a></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64" data-v-da56443a></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78" data-v-da56443a></line><line x1="1" y1="12" x2="3" y2="12" data-v-da56443a></line><line x1="21" y1="12" x2="23" y2="12" data-v-da56443a></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36" data-v-da56443a></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22" data-v-da56443a></line>',9)]))):(a(),r("svg",mt,t[15]||(t[15]=[e("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"},null,-1)])))])])],2),e("main",vt,[i.loading?(a(),r("div",ht,t[16]||(t[16]=[e("div",{class:"loading-spinner"},null,-1),e("div",{class:"loading-text"},"Loading module details...",-1)]))):c("",!0),i.loading?c("",!0):(a(),r(g,{key:1},[e("section",gt,[e("div",ft,[e("div",yt,[e("h1",null,d(i.moduleData.name),1),e("div",wt,d(i.moduleData.code),1),e("div",_t,[e("div",xt,[t[17]||(t[17]=x('<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-da56443a><rect x="3" y="4" width="18" height="18" rx="2" ry="2" data-v-da56443a></rect><line x1="16" y1="2" x2="16" y2="6" data-v-da56443a></line><line x1="8" y1="2" x2="8" y2="6" data-v-da56443a></line><line x1="3" y1="10" x2="21" y2="10" data-v-da56443a></line></svg>',1)),e("span",null,d(i.moduleData.year||"Unknown Year")+" - Semester "+d(i.moduleData.semester||"?"),1)]),e("div",kt,[t[18]||(t[18]=x('<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-da56443a><path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2" data-v-da56443a></path><circle cx="8.5" cy="7" r="4" data-v-da56443a></circle><line x1="20" y1="8" x2="20" y2="14" data-v-da56443a></line><line x1="23" y1="11" x2="17" y2="11" data-v-da56443a></line></svg>',1)),e("span",null,d(i.moduleData.credits||0)+" credits",1)])])]),e("div",pt,[e("div",Dt,[t[20]||(t[20]=e("div",{class:"stat-title"},"Difficulty",-1)),e("div",bt,[e("div",Ct,[t[19]||(t[19]=e("div",{class:"stars-background"},"★★★★★",-1)),e("div",{class:"stars-filled",style:k({width:o.calculateStarWidth(((C=i.moduleData.statistics)==null?void 0:C.difficulty_avg)||0)})},"★★★★★",4)]),e("span",null,d(o.formatRating((R=i.moduleData.statistics)==null?void 0:R.difficulty_avg)),1)])]),e("div",Rt,[t[22]||(t[22]=e("div",{class:"stat-title"},"Teaching",-1)),e("div",Mt,[e("div",At,[t[21]||(t[21]=e("div",{class:"stars-background"},"★★★★★",-1)),e("div",{class:"stars-filled",style:k({width:o.calculateStarWidth(((M=i.moduleData.statistics)==null?void 0:M.teaching_quality_avg)||0)})},"★★★★★",4)]),e("span",null,d(o.formatRating((A=i.moduleData.statistics)==null?void 0:A.teaching_quality_avg)),1)])]),e("div",It,[t[23]||(t[23]=e("div",{class:"stat-title"},"Recommendation",-1)),e("div",St,d(o.formatPercentage((I=i.moduleData.statistics)==null?void 0:I.recommended_avg)),1)]),e("div",Ft,[t[24]||(t[24]=e("div",{class:"stat-title"},"Reviews",-1)),e("div",Bt,d(((S=i.moduleData.statistics)==null?void 0:S.total_reviews)||0),1)])])])]),e("section",Tt,[t[25]||(t[25]=e("div",{class:"section-header"},[e("h2",null,[_("Module "),e("span",{class:"accent"},"Overview")])],-1)),e("div",qt,[e("div",Pt,[f(m,{"module-data":i.moduleData},null,8,["module-data"])]),e("div",Lt,[f(B,{"grade-data":i.moduleData.grade_distribution},null,8,["grade-data"])])])]),e("section",jt,[e("div",Gt,[t[27]||(t[27]=e("h2",null,[_("Student "),e("span",{class:"accent"},"Reviews")],-1)),o.isLoggedIn?(a(),r("div",{key:0,class:"add-review-btn",onClick:t[1]||(t[1]=u=>i.showReviewForm=!i.showReviewForm)},[t[26]||(t[26]=e("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("circle",{cx:"12",cy:"12",r:"10"}),e("line",{x1:"12",y1:"8",x2:"12",y2:"16"}),e("line",{x1:"8",y1:"12",x2:"16",y2:"12"})],-1)),e("span",null,d(i.showReviewForm?"Cancel":"Add Review"),1)])):c("",!0)]),i.showReviewForm&&o.isLoggedIn?(a(),r("div",Vt,[f(T,{"module-id":i.moduleId,onReviewSubmitted:o.onReviewSubmitted,onFormCanceled:t[2]||(t[2]=u=>i.showReviewForm=!1)},null,8,["module-id","onReviewSubmitted"])])):c("",!0),e("div",Nt,[e("div",Ut,[t[29]||(t[29]=e("label",null,"Sort By",-1)),F(e("select",{"onUpdate:modelValue":t[3]||(t[3]=u=>i.reviewSortBy=u)},t[28]||(t[28]=[e("option",{value:"recent"},"Most Recent",-1),e("option",{value:"rating"},"Highest Rating",-1),e("option",{value:"useful"},"Most Useful",-1)]),512),[[G,i.reviewSortBy]])])]),i.moduleData.reviews&&i.moduleData.reviews.length>0?(a(),r("div",Et,[(a(!0),r(g,null,y(o.sortedReviews,u=>(a(),E(q,{key:u.id,review:u,"is-author":o.isReviewAuthor(u),onDeleteReview:o.confirmDeleteReview},null,8,["review","is-author","onDeleteReview"]))),128))])):(a(),r("div",Ht,[t[31]||(t[31]=x('<svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round" data-v-da56443a><rect x="2" y="2" width="20" height="20" rx="2.18" ry="2.18" data-v-da56443a></rect><line x1="7" y1="2" x2="7" y2="22" data-v-da56443a></line><line x1="17" y1="2" x2="17" y2="22" data-v-da56443a></line><line x1="2" y1="12" x2="22" y2="12" data-v-da56443a></line><line x1="2" y1="7" x2="7" y2="7" data-v-da56443a></line><line x1="2" y1="17" x2="7" y2="17" data-v-da56443a></line><line x1="17" y1="17" x2="22" y2="17" data-v-da56443a></line><line x1="17" y1="7" x2="22" y2="7" data-v-da56443a></line></svg><p data-v-da56443a>No reviews yet for this module. Be the first to share your experience!</p>',2)),o.isLoggedIn&&!i.showReviewForm?(a(),r("div",{key:0,class:"no-reviews-btn",onClick:t[4]||(t[4]=u=>i.showReviewForm=!0)},t[30]||(t[30]=[e("span",null,"Add Review",-1),e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"M5 12h14"}),e("path",{d:"M12 5l7 7-7 7"})],-1)]))):c("",!0)]))])],64))]),f(P),i.showDeleteModal?(a(),r("div",zt,[e("div",Wt,[e("div",Yt,[t[33]||(t[33]=e("h3",null,"Delete Review",-1)),e("button",{class:"modal-close",onClick:t[5]||(t[5]=u=>i.showDeleteModal=!1)},t[32]||(t[32]=[e("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1)]))]),t[34]||(t[34]=e("div",{class:"modal-content"},[e("p",null,"Are you sure you want to delete this review? This action cannot be undone.")],-1)),e("div",Ot,[e("button",{class:"cancel-btn",onClick:t[6]||(t[6]=u=>i.showDeleteModal=!1)},"Cancel"),e("button",{class:"delete-btn",onClick:t[7]||(t[7]=(...u)=>o.deleteReview&&o.deleteReview(...u))},"Delete Review")])])])):c("",!0),i.showToast?(a(),r("div",{key:1,class:h(["toast-notification",i.toastType])},[i.toastType==="success"?(a(),r("svg",Qt,t[35]||(t[35]=[e("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"},null,-1),e("polyline",{points:"22 4 12 14.01 9 11.01"},null,-1)]))):(a(),r("svg",$t,t[36]||(t[36]=[e("circle",{cx:"12",cy:"12",r:"10"},null,-1),e("line",{x1:"12",y1:"8",x2:"12",y2:"12"},null,-1),e("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"},null,-1)]))),e("span",null,d(i.toastMessage),1)],2)):c("",!0)],512)}const Zt=p(ot,[["render",Jt],["__scopeId","data-v-da56443a"]]);export{Zt as default};
