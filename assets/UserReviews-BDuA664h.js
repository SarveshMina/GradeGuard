import{_ as M,F as C,c as r,a as e,b as u,d as c,w as h,r as g,g as y,n as m,i as p,h as w,f as k,m as D,v as T,j as R,t as d,k as S,A as B,l as j,o as a,p as f}from"./index-C4I2UW3l.js";import{g as x}from"./gradeRadarService-CKlUWBtf.js";const L={name:"UserReviews",components:{Footer:C},data(){return{darkMode:!1,isScrolled:!1,loading:!0,searchQuery:"",reviews:[],sortBy:"recent",showDeleteModal:!1,reviewToDelete:null,showToast:!1,toastMessage:"",toastType:"success"}},computed:{filteredReviews(){let s=[...this.reviews];if(this.searchQuery){const t=this.searchQuery.toLowerCase();s=s.filter(n=>n.module_name.toLowerCase().includes(t)||n.university.toLowerCase().includes(t)||n.degree.toLowerCase().includes(t)||n.comment&&n.comment.toLowerCase().includes(t))}switch(this.sortBy){case"recent":s.sort((t,n)=>new Date(n.created_at)-new Date(t.created_at));break;case"university":s.sort((t,n)=>t.university.localeCompare(n.university));break;case"module":s.sort((t,n)=>t.module_name.localeCompare(n.module_name));break;case"rating":s.sort((t,n)=>n.teaching_quality-t.teaching_quality);break}return s}},methods:{toggleDarkMode(){this.darkMode=j(),this.updateGradient()},updateGradient(){const s=this.$refs.userReviewsContainer;s&&(this.darkMode?(s.style.setProperty("--bg-gradient-from","#1a1a2e"),s.style.setProperty("--bg-gradient-to","#0f0f1a")):(s.style.setProperty("--bg-gradient-from","#f9f9ff"),s.style.setProperty("--bg-gradient-to","#f0f0ff")))},handleScroll(){this.isScrolled=window.scrollY>20},handleSearch(){},calculateStarWidth(s){return`${s/5*100}%`},formatDate(s){if(!s)return"Unknown date";const t={year:"numeric",month:"short",day:"numeric"};return new Date(s).toLocaleDateString(void 0,t)},goToModule(s){s&&this.$router.push(`/graderadar/module/${s}`)},confirmDeleteReview(s){this.reviewToDelete=s,this.showDeleteModal=!0},async deleteReview(){if(this.reviewToDelete)try{await x.deleteReview(this.reviewToDelete),this.reviews=this.reviews.filter(s=>s.id!==this.reviewToDelete),this.displayToast("Review deleted successfully","success")}catch(s){console.error("Error deleting review:",s),this.displayToast("Error deleting review. Please try again.","error")}finally{this.showDeleteModal=!1,this.reviewToDelete=null}},async loadUserReviews(){this.loading=!0;try{const s=await x.getUserReviews();this.reviews=s.data||[]}catch(s){console.error("Error loading user reviews:",s),this.displayToast("Error loading your reviews. Please try again.","error")}finally{this.loading=!1}},displayToast(s,t="success"){this.toastMessage=s,this.toastType=t,this.showToast=!0,setTimeout(()=>{this.showToast=!1},3e3)}},mounted(){this.darkMode=S(),window.addEventListener("darkModeChange",s=>{this.darkMode=s.detail.isDark,this.updateGradient()}),window.addEventListener("scroll",this.handleScroll),B.init({duration:800,offset:100,once:!0,easing:"ease-out-cubic"}),this.updateGradient(),this.loadUserReviews()},beforeUnmount(){window.removeEventListener("darkModeChange",this.onDarkModeChange),window.removeEventListener("scroll",this.handleScroll)}},V={class:"user-reviews-container",ref:"userReviewsContainer"},E={class:"breadcrumbs"},U={class:"header-actions"},N={key:0,class:"sun-icon",xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},P={key:1,class:"moon-icon",xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},Q={class:"user-reviews-main"},q={key:0,class:"loading-container"},F={class:"filter-section","data-aos":"fade-up"},G={class:"filter-group"},z={class:"search-container"},A={class:"reviews-section","data-aos":"fade-up"},H={key:0,class:"reviews-list"},W={class:"review-header"},Y={class:"module-info"},I={class:"module-meta"},O={class:"university"},J={class:"degree"},K={class:"review-actions"},X=["onClick"],Z=["onClick"],$={class:"review-stats"},ee={class:"rating-item"},te={class:"rating-value"},se={class:"rating-stars"},oe={class:"rating-item"},ie={class:"rating-value"},re={class:"rating-stars"},ae={class:"rating-item"},ne={class:"rating-value"},le={class:"rating-item"},de={class:"rating-value"},ce={key:0,class:"review-comment"},ue={key:1,class:"no-reviews"},ve={key:0},he={key:1},ye={key:0,class:"modal-overlay"},we={class:"modal-container"},ge={class:"modal-header"},me={class:"modal-actions"},pe={key:0,width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},ke={key:1,width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"};function fe(s,t,n,xe,i,l){const v=g("router-link"),b=g("Footer");return a(),r("div",V,[e("header",{class:m(["user-reviews-header",{scrolled:i.isScrolled}])},[e("div",E,[u(v,{to:"/",class:"breadcrumb-item"},{default:h(()=>t[7]||(t[7]=[w("Home")])),_:1}),t[9]||(t[9]=e("span",{class:"breadcrumb-separator"},"/",-1)),u(v,{to:"/graderadar",class:"breadcrumb-item"},{default:h(()=>t[8]||(t[8]=[w("GradeRadar")])),_:1}),t[10]||(t[10]=e("span",{class:"breadcrumb-separator"},"/",-1)),t[11]||(t[11]=e("span",{class:"breadcrumb-item active"},"My Reviews",-1))]),e("div",U,[e("button",{onClick:t[0]||(t[0]=(...o)=>l.toggleDarkMode&&l.toggleDarkMode(...o)),class:"theme-toggle","aria-label":"Toggle dark mode"},[i.darkMode?(a(),r("svg",N,t[12]||(t[12]=[y('<circle cx="12" cy="12" r="5" data-v-c43a6d41></circle><line x1="12" y1="1" x2="12" y2="3" data-v-c43a6d41></line><line x1="12" y1="21" x2="12" y2="23" data-v-c43a6d41></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64" data-v-c43a6d41></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78" data-v-c43a6d41></line><line x1="1" y1="12" x2="3" y2="12" data-v-c43a6d41></line><line x1="21" y1="12" x2="23" y2="12" data-v-c43a6d41></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36" data-v-c43a6d41></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22" data-v-c43a6d41></line>',9)]))):(a(),r("svg",P,t[13]||(t[13]=[e("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"},null,-1)])))])])],2),e("main",Q,[i.loading?(a(),r("div",q,t[14]||(t[14]=[e("div",{class:"loading-spinner"},null,-1),e("div",{class:"loading-text"},"Loading your reviews...",-1)]))):c("",!0),i.loading?c("",!0):(a(),r(p,{key:1},[t[28]||(t[28]=e("section",{class:"user-reviews-heading","data-aos":"fade-up"},[e("h1",null,[w("My "),e("span",{class:"accent"},"Reviews")]),e("p",null,"Manage and view all the reviews you've submitted")],-1)),e("section",F,[e("div",G,[t[16]||(t[16]=e("label",null,"Sort By",-1)),k(e("select",{"onUpdate:modelValue":t[1]||(t[1]=o=>i.sortBy=o)},t[15]||(t[15]=[e("option",{value:"recent"},"Most Recent",-1),e("option",{value:"university"},"University",-1),e("option",{value:"module"},"Module Name",-1),e("option",{value:"rating"},"Rating (Highest)",-1)]),512),[[D,i.sortBy]])]),e("div",z,[k(e("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=o=>i.searchQuery=o),onInput:t[3]||(t[3]=(...o)=>l.handleSearch&&l.handleSearch(...o)),placeholder:"Search reviews...",class:"search-input"},null,544),[[T,i.searchQuery]]),t[17]||(t[17]=e("svg",{class:"search-icon",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("circle",{cx:"11",cy:"11",r:"8"}),e("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})],-1))])]),e("section",A,[l.filteredReviews.length>0?(a(),r("div",H,[(a(!0),r(p,null,R(l.filteredReviews,o=>(a(),r("div",{key:o.id,class:"review-card","data-aos":"fade-up","data-aos-delay":"50"},[e("div",W,[e("div",Y,[e("h3",null,d(o.module_name),1),e("div",I,[e("span",O,d(o.university),1),e("span",J,d(o.degree),1)])]),e("div",K,[e("button",{class:"view-btn",onClick:_=>l.goToModule(o.module_id)},t[18]||(t[18]=[e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),e("circle",{cx:"12",cy:"12",r:"3"})],-1),e("span",null,"View Module",-1)]),8,X),e("button",{class:"delete-btn",onClick:_=>l.confirmDeleteReview(o.id)},t[19]||(t[19]=[y('<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-c43a6d41><polyline points="3 6 5 6 21 6" data-v-c43a6d41></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2" data-v-c43a6d41></path><line x1="10" y1="11" x2="10" y2="17" data-v-c43a6d41></line><line x1="14" y1="11" x2="14" y2="17" data-v-c43a6d41></line></svg><span data-v-c43a6d41>Delete</span>',2)]),8,Z)])]),e("div",$,[e("div",ee,[t[21]||(t[21]=e("div",{class:"rating-label"},"Difficulty",-1)),e("div",te,[e("div",se,[t[20]||(t[20]=e("div",{class:"stars-background"},"★★★★★",-1)),e("div",{class:"stars-filled",style:f({width:l.calculateStarWidth(o.difficulty)})},"★★★★★",4)]),e("span",null,d(o.difficulty),1)])]),e("div",oe,[t[23]||(t[23]=e("div",{class:"rating-label"},"Teaching Quality",-1)),e("div",ie,[e("div",re,[t[22]||(t[22]=e("div",{class:"stars-background"},"★★★★★",-1)),e("div",{class:"stars-filled",style:f({width:l.calculateStarWidth(o.teaching_quality)})},"★★★★★",4)]),e("span",null,d(o.teaching_quality),1)])]),e("div",ae,[t[24]||(t[24]=e("div",{class:"rating-label"},"Recommended",-1)),e("div",ne,d(o.recommended?"Yes":"No"),1)]),e("div",le,[t[25]||(t[25]=e("div",{class:"rating-label"},"Date",-1)),e("div",de,d(l.formatDate(o.created_at)),1)])]),o.comment?(a(),r("div",ce,[e("p",null,d(o.comment),1)])):c("",!0)]))),128))])):(a(),r("div",ue,[t[27]||(t[27]=y('<svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round" data-v-c43a6d41><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2" data-v-c43a6d41></path><rect x="8" y="2" width="8" height="4" rx="1" ry="1" data-v-c43a6d41></rect><circle cx="12" cy="14" r="4" data-v-c43a6d41></circle><path d="M12 10v1" data-v-c43a6d41></path><path d="M12 17v.01" data-v-c43a6d41></path></svg>',1)),i.searchQuery?(a(),r("p",ve,"No reviews found matching your search. Try adjusting your search criteria.")):(a(),r("p",he,"You haven't submitted any reviews yet. Start by reviewing modules you've taken!")),u(v,{to:"/graderadar",class:"explore-btn"},{default:h(()=>t[26]||(t[26]=[e("span",null,"Explore Modules",-1),e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"M5 12h14"}),e("path",{d:"M12 5l7 7-7 7"})],-1)])),_:1})]))])],64))]),u(b),i.showDeleteModal?(a(),r("div",ye,[e("div",we,[e("div",ge,[t[30]||(t[30]=e("h3",null,"Delete Review",-1)),e("button",{class:"modal-close",onClick:t[4]||(t[4]=o=>i.showDeleteModal=!1)},t[29]||(t[29]=[e("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1)]))]),t[31]||(t[31]=e("div",{class:"modal-content"},[e("p",null,"Are you sure you want to delete this review? This action cannot be undone.")],-1)),e("div",me,[e("button",{class:"cancel-btn",onClick:t[5]||(t[5]=o=>i.showDeleteModal=!1)},"Cancel"),e("button",{class:"delete-btn",onClick:t[6]||(t[6]=(...o)=>l.deleteReview&&l.deleteReview(...o))},"Delete Review")])])])):c("",!0),i.showToast?(a(),r("div",{key:1,class:m(["toast-notification",i.toastType])},[i.toastType==="success"?(a(),r("svg",pe,t[32]||(t[32]=[e("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"},null,-1),e("polyline",{points:"22 4 12 14.01 9 11.01"},null,-1)]))):(a(),r("svg",ke,t[33]||(t[33]=[e("circle",{cx:"12",cy:"12",r:"10"},null,-1),e("line",{x1:"12",y1:"8",x2:"12",y2:"12"},null,-1),e("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"},null,-1)]))),e("span",null,d(i.toastMessage),1)],2)):c("",!0)],512)}const Me=M(L,[["render",fe],["__scopeId","data-v-c43a6d41"]]);export{Me as default};
