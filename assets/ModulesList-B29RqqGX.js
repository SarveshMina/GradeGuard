import{_ as D,F as L,c as a,a as t,b as v,d as y,w as f,r as N,t as n,f as h,v as Y,g as m,n as B,h as g,m as p,i as k,j as w,k as j,A as U,l as V,o as l,p as T}from"./index-C4I2UW3l.js";import{g as A}from"./gradeRadarService-CKlUWBtf.js";const E={name:"ModulesList",components:{Footer:L},data(){return{darkMode:!1,isScrolled:!1,loading:!0,searchQuery:"",universityName:"",degreeName:"",modules:[],filterYear:"",filterSemester:"",sortBy:"name",showToast:!1,toastMessage:"",toastType:"success"}},computed:{availableYears(){const s=new Set;return this.modules.forEach(e=>{e.year&&s.add(e.year)}),Array.from(s).sort()},availableSemesters(){const s=new Set;return this.modules.forEach(e=>{e.semester&&s.add(e.semester)}),Array.from(s).sort((e,d)=>e-d)},filteredModules(){let s=[...this.modules];if(this.searchQuery){const e=this.searchQuery.toLowerCase();s=s.filter(d=>d.name.toLowerCase().includes(e)||d.code&&d.code.toLowerCase().includes(e))}switch(this.filterYear&&(s=s.filter(e=>e.year===this.filterYear)),this.filterSemester&&(s=s.filter(e=>e.semester==this.filterSemester)),this.sortBy){case"name":s.sort((e,d)=>e.name.localeCompare(d.name));break;case"rating":s.sort((e,d)=>{var o,u;const c=((o=e.statistics)==null?void 0:o.teaching_quality_avg)||0;return(((u=d.statistics)==null?void 0:u.teaching_quality_avg)||0)-c});break;case"difficulty":s.sort((e,d)=>{var o,u;const c=((o=e.statistics)==null?void 0:o.difficulty_avg)||0,r=((u=d.statistics)==null?void 0:u.difficulty_avg)||0;return c-r});break;case"reviews":s.sort((e,d)=>{var o,u;const c=((o=e.statistics)==null?void 0:o.total_reviews)||0;return(((u=d.statistics)==null?void 0:u.total_reviews)||0)-c});break}return s}},methods:{toggleDarkMode(){this.darkMode=V(),this.updateGradient()},updateGradient(){const s=this.$refs.modulesListContainer;s&&(this.darkMode?(s.style.setProperty("--bg-gradient-from","#1a1a2e"),s.style.setProperty("--bg-gradient-to","#0f0f1a")):(s.style.setProperty("--bg-gradient-from","#f9f9ff"),s.style.setProperty("--bg-gradient-to","#f0f0ff")))},handleScroll(){this.isScrolled=window.scrollY>20},handleSearch(){},navigateToModule(s){this.$router.push(`/graderadar/module/${s}`)},calculateStarWidth(s){return`${s/5*100}%`},formatRating(s){return s==null?"N/A":s.toFixed(1)},formatPercentage(s){return s==null?"N/A":`${s.toFixed(0)}%`},async loadModules(){this.loading=!0;try{if(this.universityName=decodeURIComponent(this.$route.params.university||""),this.degreeName=decodeURIComponent(this.$route.params.degree||""),!this.universityName||!this.degreeName){this.displayToast("University and degree names are required","error"),this.$router.push("/graderadar");return}const s=await A.getDegreeModules(this.universityName,this.degreeName);this.modules=s.data.modules||[],this.filterYear="",this.filterSemester="",this.sortBy="name"}catch(s){console.error("Error loading modules:",s),this.displayToast("Error loading modules. Please try again.","error")}finally{this.loading=!1}},displayToast(s,e="success"){this.toastMessage=s,this.toastType=e,this.showToast=!0,setTimeout(()=>{this.showToast=!1},3e3)}},mounted(){this.darkMode=j(),window.addEventListener("darkModeChange",s=>{this.darkMode=s.detail.isDark,this.updateGradient()}),window.addEventListener("scroll",this.handleScroll),U.init({duration:800,offset:100,once:!0,easing:"ease-out-cubic"}),this.updateGradient(),this.loadModules()},beforeUnmount(){window.removeEventListener("darkModeChange",this.onDarkModeChange),window.removeEventListener("scroll",this.handleScroll)}},P={class:"modules-list-container",ref:"modulesListContainer"},F={class:"breadcrumbs"},q={class:"breadcrumb-item active"},Q={class:"header-actions"},G={class:"search-container"},I={key:0,class:"sun-icon",xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},z={key:1,class:"moon-icon",xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},H={class:"modules-list-main"},W={key:0,class:"loading-container"},O={key:1,class:"modules-section","data-aos":"fade-up"},J={class:"section-header"},K={class:"module-filters"},X={class:"filter-group"},Z=["value"],$={class:"filter-group"},ee=["value"],te={class:"filter-group"},se={class:"modules-list"},ie=["onClick"],re={class:"module-header"},oe={class:"module-code"},ae={class:"module-stats"},le={class:"stats-row"},ne={class:"stat-item"},de={class:"stat-value"},ue={class:"rating-stars"},ce={class:"stat-item"},ve={class:"stat-value"},ye={class:"rating-stars"},he={class:"stats-row"},me={class:"stat-item"},ge={class:"stat-value"},fe={class:"stat-item"},pe={class:"stat-value"},ke={class:"module-meta"},we={class:"meta-item"},be={class:"meta-item"},xe={key:0,class:"no-modules"},_e={key:0},Me={key:1},Se={key:0,width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},Ce={key:1,width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"};function Ne(s,e,d,c,r,o){const u=N("router-link"),R=N("Footer");return l(),a("div",P,[t("header",{class:B(["modules-list-header",{scrolled:r.isScrolled}])},[t("div",F,[v(u,{to:"/",class:"breadcrumb-item"},{default:f(()=>e[6]||(e[6]=[g("Home")])),_:1}),e[8]||(e[8]=t("span",{class:"breadcrumb-separator"},"/",-1)),v(u,{to:"/graderadar",class:"breadcrumb-item"},{default:f(()=>e[7]||(e[7]=[g("GradeRadar")])),_:1}),e[9]||(e[9]=t("span",{class:"breadcrumb-separator"},"/",-1)),v(u,{to:`/graderadar/university/${encodeURIComponent(r.universityName)}`,class:"breadcrumb-item"},{default:f(()=>[g(n(r.universityName),1)]),_:1},8,["to"]),e[10]||(e[10]=t("span",{class:"breadcrumb-separator"},"/",-1)),t("span",q,n(r.degreeName),1)]),t("div",Q,[t("div",G,[h(t("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=i=>r.searchQuery=i),onInput:e[1]||(e[1]=(...i)=>o.handleSearch&&o.handleSearch(...i)),placeholder:"Search modules...",class:"search-input"},null,544),[[Y,r.searchQuery]]),e[11]||(e[11]=t("svg",{class:"search-icon",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[t("circle",{cx:"11",cy:"11",r:"8"}),t("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})],-1))]),t("button",{onClick:e[2]||(e[2]=(...i)=>o.toggleDarkMode&&o.toggleDarkMode(...i)),class:"theme-toggle","aria-label":"Toggle dark mode"},[r.darkMode?(l(),a("svg",I,e[12]||(e[12]=[m('<circle cx="12" cy="12" r="5" data-v-4481b959></circle><line x1="12" y1="1" x2="12" y2="3" data-v-4481b959></line><line x1="12" y1="21" x2="12" y2="23" data-v-4481b959></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64" data-v-4481b959></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78" data-v-4481b959></line><line x1="1" y1="12" x2="3" y2="12" data-v-4481b959></line><line x1="21" y1="12" x2="23" y2="12" data-v-4481b959></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36" data-v-4481b959></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22" data-v-4481b959></line>',9)]))):(l(),a("svg",z,e[13]||(e[13]=[t("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"},null,-1)])))])])],2),t("main",H,[r.loading?(l(),a("div",W,e[14]||(e[14]=[t("div",{class:"loading-spinner"},null,-1),t("div",{class:"loading-text"},"Loading modules...",-1)]))):y("",!0),r.loading?y("",!0):(l(),a("section",O,[t("div",J,[t("h1",null,[g(n(r.degreeName)+" ",1),e[15]||(e[15]=t("span",{class:"accent"},"Modules",-1))]),e[16]||(e[16]=t("p",null,"Browse and explore modules for this degree program",-1))]),t("div",K,[t("div",X,[e[18]||(e[18]=t("label",null,"Year",-1)),h(t("select",{"onUpdate:modelValue":e[3]||(e[3]=i=>r.filterYear=i)},[e[17]||(e[17]=t("option",{value:""},"All Years",-1)),(l(!0),a(k,null,w(o.availableYears,i=>(l(),a("option",{key:i,value:i},n(i),9,Z))),128))],512),[[p,r.filterYear]])]),t("div",$,[e[20]||(e[20]=t("label",null,"Semester",-1)),h(t("select",{"onUpdate:modelValue":e[4]||(e[4]=i=>r.filterSemester=i)},[e[19]||(e[19]=t("option",{value:""},"All Semesters",-1)),(l(!0),a(k,null,w(o.availableSemesters,i=>(l(),a("option",{key:i,value:i},"Semester "+n(i),9,ee))),128))],512),[[p,r.filterSemester]])]),t("div",te,[e[22]||(e[22]=t("label",null,"Sort By",-1)),h(t("select",{"onUpdate:modelValue":e[5]||(e[5]=i=>r.sortBy=i)},e[21]||(e[21]=[t("option",{value:"name"},"Module Name",-1),t("option",{value:"rating"},"Rating (Highest)",-1),t("option",{value:"difficulty"},"Difficulty (Lowest)",-1),t("option",{value:"reviews"},"Most Reviews",-1)]),512),[[p,r.sortBy]])])]),t("div",se,[(l(!0),a(k,null,w(o.filteredModules,i=>{var b,x,_,M,S,C;return l(),a("div",{key:i.id,class:"module-card",onClick:Be=>o.navigateToModule(i.id),"data-aos":"fade-up","data-aos-delay":"50"},[t("div",re,[t("h3",null,n(i.name),1),t("div",oe,n(i.code),1)]),t("div",ae,[t("div",le,[t("div",ne,[e[24]||(e[24]=t("div",{class:"stat-label"},"Difficulty",-1)),t("div",de,[t("div",ue,[e[23]||(e[23]=t("div",{class:"stars-background"},"★★★★★",-1)),t("div",{class:"stars-filled",style:T({width:o.calculateStarWidth(((b=i.statistics)==null?void 0:b.difficulty_avg)||0)})},"★★★★★",4)]),t("span",null,n(o.formatRating((x=i.statistics)==null?void 0:x.difficulty_avg)),1)])]),t("div",ce,[e[26]||(e[26]=t("div",{class:"stat-label"},"Teaching",-1)),t("div",ve,[t("div",ye,[e[25]||(e[25]=t("div",{class:"stars-background"},"★★★★★",-1)),t("div",{class:"stars-filled",style:T({width:o.calculateStarWidth(((_=i.statistics)==null?void 0:_.teaching_quality_avg)||0)})},"★★★★★",4)]),t("span",null,n(o.formatRating((M=i.statistics)==null?void 0:M.teaching_quality_avg)),1)])])]),t("div",he,[t("div",me,[e[27]||(e[27]=t("div",{class:"stat-label"},"Recommended",-1)),t("div",ge,n(o.formatPercentage((S=i.statistics)==null?void 0:S.recommended_avg)),1)]),t("div",fe,[e[28]||(e[28]=t("div",{class:"stat-label"},"Reviews",-1)),t("div",pe,n(((C=i.statistics)==null?void 0:C.total_reviews)||0),1)])])]),t("div",ke,[t("div",we,[e[29]||(e[29]=m('<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-4481b959><rect x="3" y="4" width="18" height="18" rx="2" ry="2" data-v-4481b959></rect><line x1="16" y1="2" x2="16" y2="6" data-v-4481b959></line><line x1="8" y1="2" x2="8" y2="6" data-v-4481b959></line><line x1="3" y1="10" x2="21" y2="10" data-v-4481b959></line></svg>',1)),t("span",null,n(i.year||"Unknown Year")+" - Semester "+n(i.semester||"?"),1)]),t("div",be,[e[30]||(e[30]=m('<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-4481b959><path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2" data-v-4481b959></path><circle cx="8.5" cy="7" r="4" data-v-4481b959></circle><line x1="20" y1="8" x2="20" y2="14" data-v-4481b959></line><line x1="23" y1="11" x2="17" y2="11" data-v-4481b959></line></svg>',1)),t("span",null,n(i.credits||0)+" credits",1)])]),e[31]||(e[31]=t("svg",{class:"arrow-icon",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[t("path",{d:"M5 12h14"}),t("path",{d:"M12 5l7 7-7 7"})],-1))],8,ie)}),128))]),o.filteredModules.length===0?(l(),a("div",xe,[e[32]||(e[32]=m('<svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round" data-v-4481b959><rect x="2" y="2" width="20" height="20" rx="2.18" ry="2.18" data-v-4481b959></rect><line x1="7" y1="2" x2="7" y2="22" data-v-4481b959></line><line x1="17" y1="2" x2="17" y2="22" data-v-4481b959></line><line x1="2" y1="12" x2="22" y2="12" data-v-4481b959></line><line x1="2" y1="7" x2="7" y2="7" data-v-4481b959></line><line x1="2" y1="17" x2="7" y2="17" data-v-4481b959></line><line x1="17" y1="17" x2="22" y2="17" data-v-4481b959></line><line x1="17" y1="7" x2="22" y2="7" data-v-4481b959></line></svg>',1)),r.searchQuery?(l(),a("p",_e,"No modules found matching your search criteria. Try adjusting your filters.")):(l(),a("p",Me,"No modules found for this degree program."))])):y("",!0)]))]),v(R),r.showToast?(l(),a("div",{key:0,class:B(["toast-notification",r.toastType])},[r.toastType==="success"?(l(),a("svg",Se,e[33]||(e[33]=[t("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"},null,-1),t("polyline",{points:"22 4 12 14.01 9 11.01"},null,-1)]))):(l(),a("svg",Ce,e[34]||(e[34]=[t("circle",{cx:"12",cy:"12",r:"10"},null,-1),t("line",{x1:"12",y1:"8",x2:"12",y2:"12"},null,-1),t("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"},null,-1)]))),t("span",null,n(r.toastMessage),1)],2)):y("",!0)],512)}const De=D(E,[["render",Ne],["__scopeId","data-v-4481b959"]]);export{De as default};
