import{_ as S,c as t,b as U,a as r,f as p,k as m,t as u,n as l,g as h,v as f,l as E,m as k,e as v,p as y,A as w,q as c,u as b,o as n}from"./index-Cwuhun0g.js";import{_ as P}from"./google-logo-UCVcc2ip.js";const x={name:"MobileLogin",data(){return{features:["Grade Tracking","Performance Analytics","Smart Predictions","Student Dashboard"],showEmailLogin:!1,formMode:"login",showPassword:!1,loginEmail:"",loginPassword:"",rememberMe:!1,isLoggingIn:!1,loginErrors:{email:"",password:""},signUpEmail:"",signUpPassword:"",firstName:"",isSigningUp:!1,passwordStrength:0,passwordStrengthText:"",passwordHasLength:!1,passwordHasUpper:!1,passwordHasNumber:!1,passwordHasSpecial:!1,signUpErrors:{email:"",password:"",firstName:"",university:"",degree:""},forgotEmail:"",isResetting:!1,forgotErrors:{email:""}}},computed:{isSignUpValid(){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(this.signUpEmail)&&this.passwordStrength>=2&&this.firstName.trim()!==""}},methods:{showEmailForm(){this.showEmailLogin=!0,this.formMode="signup"},goToLogin(){this.showEmailLogin=!0,this.formMode="login"},switchFormMode(d){this.formMode=d,this.loginErrors={email:"",password:""},this.signUpErrors={email:"",password:"",firstName:"",university:"",degree:""},this.forgotErrors={email:""}},switchToForgot(){this.formMode="forgot"},checkPasswordStrength(){const d=this.signUpPassword;this.passwordHasLength=d.length>=8,this.passwordHasUpper=/[A-Z]/.test(d),this.passwordHasNumber=/[0-9]/.test(d),this.passwordHasSpecial=/[^A-Za-z0-9]/.test(d);let s=0;this.passwordHasLength&&s++,this.passwordHasUpper&&s++,this.passwordHasNumber&&s++,this.passwordHasSpecial&&s++,this.passwordStrength=s,d.length===0?this.passwordStrengthText="":s===0?this.passwordStrengthText="Very Weak":s===1?this.passwordStrengthText="Weak":s===2?this.passwordStrengthText="Fair":s===3?this.passwordStrengthText="Good":this.passwordStrengthText="Strong"},getStrengthClass(d){if(this.passwordStrength>=d){if(this.passwordStrength===1)return"strength-weak";if(this.passwordStrength===2)return"strength-fair";if(this.passwordStrength===3)return"strength-good";if(this.passwordStrength===4)return"strength-strong"}return""},loginWithGoogle(){window.location.href=`${w}/auth/google`},async handleLogin(){var s,g;if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(this.loginEmail)){this.loginErrors.email="Please enter a valid email address.";return}if(!this.loginPassword){this.loginErrors.password="Please enter your password.";return}try{this.isLoggingIn=!0;const a=await y.post(`${w}/login`,{email:this.loginEmail,password:this.loginPassword,rememberMe:this.rememberMe},{withCredentials:!0});console.log("Login response:",a.data);try{const e=await b.fetchSettings();e&&b.applySettings(e)}catch(e){console.error("Error loading user settings:",e)}this.$router.push("/dashboard")}catch(a){console.error("Login error:",a);const e=((g=(s=a.response)==null?void 0:s.data)==null?void 0:g.error)||a.message;e.includes("email")||e.includes("user")?this.loginErrors.email="No account found with this email address.":e.includes("password")?this.loginErrors.password="Incorrect password. Please try again.":c({type:"error",message:"Login failed: "+e})}finally{this.isLoggingIn=!1}},async handleSignUp(){var s,g;if(!this.firstName.trim()){this.signUpErrors.firstName="Please enter your first name.";return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(this.signUpEmail)){this.signUpErrors.email="Please enter a valid email address.";return}if(this.passwordStrength<2){this.signUpErrors.password="Please create a stronger password.";return}try{this.isSigningUp=!0;const a={firstName:this.firstName,email:this.signUpEmail,password:this.signUpPassword,university:"",degree:"",calcType:"UK Percentage"};console.log("Signup payload:",a);const e=await y.post(`${w}/register`,a,{withCredentials:!0});console.log("Signup response:",e.data),this.$router.push("/dashboard")}catch(a){console.error("Signup error:",a);const e=((g=(s=a.response)==null?void 0:s.data)==null?void 0:g.error)||a.message;e.includes("email")?this.signUpErrors.email=e:e.includes("password")?this.signUpErrors.password=e:c({type:"error",message:"Sign up failed: "+e})}finally{this.isSigningUp=!1}},async handleForgot(){var s,g;if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(this.forgotEmail)){this.forgotErrors.email="Please enter a valid email address.";return}try{this.isResetting=!0,await y.post(`${w}/password/forgot`,{email:this.forgotEmail},{withCredentials:!0}),c({type:"success",message:`Password reset instructions have been sent to ${this.forgotEmail}.`}),this.switchFormMode("login")}catch(a){const e=((g=(s=a.response)==null?void 0:s.data)==null?void 0:g.error)||a.message;e.includes("not found")||e.includes("no account")?this.forgotErrors.email="No account found with this email address.":c({type:"error",message:"Password reset request failed: "+e})}finally{this.isResetting=!1}}}},L={class:"mobile-login-container"},M={class:"login-options"},C={class:"login-link"},N={key:0,class:"email-login-form"},T={class:"form-header"},R={class:"form-group"},F={key:0,class:"error-message"},G={class:"form-group"},_=["type"],I={key:0,class:"error-message"},V={class:"form-options"},H={class:"remember-me"},A=["disabled"],q={key:0},B={key:1,class:"loader"},D={class:"form-switcher"},W={class:"form-group"},z={key:0,class:"error-message"},Y={class:"form-group"},Z=["type"],j={key:0,class:"error-message"},J={key:1,class:"password-strength"},K={class:"strength-bars"},O={class:"strength-text"},Q={class:"form-group"},X={key:0,class:"error-message"},$=["disabled"],ss={key:0},es={key:1,class:"loader"},rs={class:"form-switcher"},os={class:"form-group"},is={key:0,class:"error-message"},ts=["disabled"],ns={key:0},as={key:1,class:"loader"},ls={class:"form-switcher"};function ds(d,s,g,a,e,i){return n(),t("div",L,[s[34]||(s[34]=U('<div class="app-info" data-v-a8a0d757><div class="logo-container" data-v-a8a0d757><div class="app-logo" data-v-a8a0d757><i class="fas fa-shield-alt" data-v-a8a0d757></i><span class="logo-text" data-v-a8a0d757>GradeGuard</span></div></div></div><div class="mascot-container" data-v-a8a0d757><div class="mascot" data-v-a8a0d757><div class="mascot-face" data-v-a8a0d757></div></div></div><div class="tagline" data-v-a8a0d757><h1 data-v-a8a0d757>Track, Analyze, Excel</h1><p class="tagline-desc" data-v-a8a0d757>Your intelligent academic companion for monitoring grades, predicting outcomes, and optimizing your study journey.</p><div class="feature-badges" data-v-a8a0d757><span class="feature-badge" data-v-a8a0d757>Grade Tracking</span><span class="feature-badge" data-v-a8a0d757>Performance Analytics</span><span class="feature-badge" data-v-a8a0d757>Smart Predictions</span></div></div>',3)),r("div",M,[r("button",{onClick:s[0]||(s[0]=(...o)=>i.loginWithGoogle&&i.loginWithGoogle(...o)),class:"login-button google-button"},s[21]||(s[21]=[r("img",{src:P,alt:"Google",class:"provider-icon"},null,-1),r("span",null,"Continue with Google",-1)])),r("button",{onClick:s[1]||(s[1]=(...o)=>i.showEmailForm&&i.showEmailForm(...o)),class:"login-button email-button"},s[22]||(s[22]=[r("i",{class:"fas fa-envelope"},null,-1),r("span",null,"Get Started",-1)])),r("div",C,[r("a",{onClick:s[2]||(s[2]=m((...o)=>i.goToLogin&&i.goToLogin(...o),["prevent"]))},"I already have an account")])]),e.showEmailLogin?(n(),t("div",N,[r("div",T,[r("button",{class:"back-button",onClick:s[3]||(s[3]=o=>e.showEmailLogin=!1)},s[23]||(s[23]=[r("i",{class:"fas fa-arrow-left"},null,-1)])),r("h3",null,u(e.formMode==="login"?"Log In":e.formMode==="signup"?"Create Account":"Reset Password"),1)]),e.formMode==="login"?(n(),t("form",{key:0,onSubmit:s[10]||(s[10]=m((...o)=>i.handleLogin&&i.handleLogin(...o),["prevent"])),class:"login-form"},[r("div",R,[r("div",{class:l(["input-wrapper",{"has-error":e.loginErrors.email}])},[s[24]||(s[24]=r("i",{class:"fas fa-envelope input-icon"},null,-1)),h(r("input",{type:"email","onUpdate:modelValue":s[4]||(s[4]=o=>e.loginEmail=o),placeholder:"Email",required:""},null,512),[[f,e.loginEmail]])],2),e.loginErrors.email?(n(),t("p",F,u(e.loginErrors.email),1)):p("",!0)]),r("div",G,[r("div",{class:l(["input-wrapper",{"has-error":e.loginErrors.password}])},[s[25]||(s[25]=r("i",{class:"fas fa-lock input-icon"},null,-1)),h(r("input",{type:e.showPassword?"text":"password","onUpdate:modelValue":s[5]||(s[5]=o=>e.loginPassword=o),placeholder:"Password",required:""},null,8,_),[[E,e.loginPassword]]),r("button",{type:"button",class:"toggle-password",onClick:s[6]||(s[6]=o=>e.showPassword=!e.showPassword)},[r("i",{class:l(e.showPassword?"fas fa-eye-slash":"fas fa-eye")},null,2)])],2),e.loginErrors.password?(n(),t("p",I,u(e.loginErrors.password),1)):p("",!0)]),r("div",V,[r("label",H,[h(r("input",{type:"checkbox","onUpdate:modelValue":s[7]||(s[7]=o=>e.rememberMe=o)},null,512),[[k,e.rememberMe]]),s[26]||(s[26]=r("span",null,"Remember me",-1))]),r("a",{onClick:s[8]||(s[8]=m((...o)=>i.switchToForgot&&i.switchToForgot(...o),["prevent"])),class:"forgot-link"},"Forgot password?")]),r("button",{type:"submit",class:l(["submit-button",{loading:e.isLoggingIn}]),disabled:e.isLoggingIn},[e.isLoggingIn?(n(),t("div",B)):(n(),t("span",q,"Log In"))],10,A),r("div",D,[s[27]||(s[27]=r("span",null,"Don't have an account?",-1)),r("a",{onClick:s[9]||(s[9]=m(o=>i.switchFormMode("signup"),["prevent"]))},"Sign Up")])],32)):e.formMode==="signup"?(n(),t("form",{key:1,onSubmit:s[17]||(s[17]=m((...o)=>i.handleSignUp&&i.handleSignUp(...o),["prevent"])),class:"signup-form"},[r("div",W,[r("div",{class:l(["input-wrapper",{"has-error":e.signUpErrors.email}])},[s[28]||(s[28]=r("i",{class:"fas fa-envelope input-icon"},null,-1)),h(r("input",{type:"email","onUpdate:modelValue":s[11]||(s[11]=o=>e.signUpEmail=o),placeholder:"Email",required:""},null,512),[[f,e.signUpEmail]])],2),e.signUpErrors.email?(n(),t("p",z,u(e.signUpErrors.email),1)):p("",!0)]),r("div",Y,[r("div",{class:l(["input-wrapper",{"has-error":e.signUpErrors.password}])},[s[29]||(s[29]=r("i",{class:"fas fa-lock input-icon"},null,-1)),h(r("input",{type:e.showPassword?"text":"password","onUpdate:modelValue":s[12]||(s[12]=o=>e.signUpPassword=o),onInput:s[13]||(s[13]=(...o)=>i.checkPasswordStrength&&i.checkPasswordStrength(...o)),placeholder:"Password",required:""},null,40,Z),[[E,e.signUpPassword]]),r("button",{type:"button",class:"toggle-password",onClick:s[14]||(s[14]=o=>e.showPassword=!e.showPassword)},[r("i",{class:l(e.showPassword?"fas fa-eye-slash":"fas fa-eye")},null,2)])],2),e.signUpErrors.password?(n(),t("p",j,u(e.signUpErrors.password),1)):p("",!0),e.signUpPassword.length>0?(n(),t("div",J,[r("div",K,[r("div",{class:l(["strength-bar",i.getStrengthClass(1)])},null,2),r("div",{class:l(["strength-bar",i.getStrengthClass(2)])},null,2),r("div",{class:l(["strength-bar",i.getStrengthClass(3)])},null,2),r("div",{class:l(["strength-bar",i.getStrengthClass(4)])},null,2)]),r("span",O,u(e.passwordStrengthText),1)])):p("",!0)]),r("div",Q,[r("div",{class:l(["input-wrapper",{"has-error":e.signUpErrors.firstName}])},[s[30]||(s[30]=r("i",{class:"fas fa-user input-icon"},null,-1)),h(r("input",{type:"text","onUpdate:modelValue":s[15]||(s[15]=o=>e.firstName=o),placeholder:"First Name",required:""},null,512),[[f,e.firstName]])],2),e.signUpErrors.firstName?(n(),t("p",X,u(e.signUpErrors.firstName),1)):p("",!0)]),r("button",{type:"submit",class:l(["submit-button",{loading:e.isSigningUp}]),disabled:e.isSigningUp||!i.isSignUpValid},[e.isSigningUp?(n(),t("div",es)):(n(),t("span",ss,"Create Account"))],10,$),r("div",rs,[s[31]||(s[31]=r("span",null,"Already have an account?",-1)),r("a",{onClick:s[16]||(s[16]=m(o=>i.switchFormMode("login"),["prevent"]))},"Log In")])],32)):e.formMode==="forgot"?(n(),t("form",{key:2,onSubmit:s[20]||(s[20]=m((...o)=>i.handleForgot&&i.handleForgot(...o),["prevent"])),class:"forgot-form"},[r("div",os,[r("div",{class:l(["input-wrapper",{"has-error":e.forgotErrors.email}])},[s[32]||(s[32]=r("i",{class:"fas fa-envelope input-icon"},null,-1)),h(r("input",{type:"email","onUpdate:modelValue":s[18]||(s[18]=o=>e.forgotEmail=o),placeholder:"Email",required:""},null,512),[[f,e.forgotEmail]])],2),e.forgotErrors.email?(n(),t("p",is,u(e.forgotErrors.email),1)):p("",!0)]),s[33]||(s[33]=r("p",{class:"form-help-text"},"Enter your email and we'll send you instructions to reset your password.",-1)),r("button",{type:"submit",class:l(["submit-button",{loading:e.isResetting}]),disabled:e.isResetting||!e.forgotEmail},[e.isResetting?(n(),t("div",as)):(n(),t("span",ns,"Send Reset Link"))],10,ts),r("div",ls,[r("a",{onClick:s[19]||(s[19]=m(o=>i.switchFormMode("login"),["prevent"]))},"Back to Login")])],32)):p("",!0)])):p("",!0),s[35]||(s[35]=r("div",{class:"terms-footer"},[r("p",null," Ready to Excel in Your Studies? Join thousands of students using GradeGuard. "),r("p",null,[v(" By signing up, you agree to the "),r("a",{href:"/terms"},"Terms and Conditions"),v(" and the "),r("a",{href:"/privacy"},"Privacy Policy"),v(" of GradeGuard. ")])],-1))])}const ms=S(x,[["render",ds],["__scopeId","data-v-a8a0d757"]]);export{ms as default};
